var Et=Object.defineProperty;var i=(e,t)=>Et(e,"name",{value:t,configurable:!0});function h(e){return new Error(`[unenv] ${e} is not implemented yet!`)}i(h,"createNotImplementedError");function T(e){return Object.assign(i(()=>{throw h(e)},"fn"),{__unenv__:!0})}i(T,"notImplemented");function Ae(e){return class{__unenv__=!0;constructor(){throw new Error(`[unenv] ${e} is not implemented yet!`)}}}i(Ae,"notImplementedClass");var oe=globalThis.performance?.timeOrigin??Date.now(),se=globalThis.performance?.now?globalThis.performance.now.bind(globalThis.performance):()=>Date.now()-oe,_t={name:"node",entryType:"node",startTime:0,duration:0,nodeStart:0,v8Start:0,bootstrapComplete:0,environment:0,loopStart:0,loopExit:0,idleTime:0,uvMetricsInfo:{loopCount:0,events:0,eventsWaiting:0},detail:void 0,toJSON(){return this}},A=class{static{i(this,"PerformanceEntry")}__unenv__=!0;detail;entryType="event";name;startTime;constructor(t,r){this.name=t,this.startTime=r?.startTime||se(),this.detail=r?.detail}get duration(){return se()-this.startTime}toJSON(){return{name:this.name,entryType:this.entryType,startTime:this.startTime,duration:this.duration,detail:this.detail}}},ie=class extends A{static{i(this,"PerformanceMark")}entryType="mark";constructor(){super(...arguments)}get duration(){return 0}},k=class extends A{static{i(this,"PerformanceMeasure")}entryType="measure"},j=class extends A{static{i(this,"PerformanceResourceTiming")}entryType="resource";serverTiming=[];connectEnd=0;connectStart=0;decodedBodySize=0;domainLookupEnd=0;domainLookupStart=0;encodedBodySize=0;fetchStart=0;initiatorType="";name="";nextHopProtocol="";redirectEnd=0;redirectStart=0;requestStart=0;responseEnd=0;responseStart=0;secureConnectionStart=0;startTime=0;transferSize=0;workerStart=0;responseStatus=0},U=class{static{i(this,"PerformanceObserverEntryList")}__unenv__=!0;getEntries(){return[]}getEntriesByName(t,r){return[]}getEntriesByType(t){return[]}},H=class{static{i(this,"Performance")}__unenv__=!0;timeOrigin=oe;eventCounts=new Map;_entries=[];_resourceTimingBufferSize=0;navigation=void 0;timing=void 0;timerify(t,r){throw h("Performance.timerify")}get nodeTiming(){return _t}eventLoopUtilization(){return{}}markResourceTiming(){return new j("")}onresourcetimingbufferfull=null;now(){return this.timeOrigin===oe?se():Date.now()-this.timeOrigin}clearMarks(t){this._entries=t?this._entries.filter(r=>r.name!==t):this._entries.filter(r=>r.entryType!=="mark")}clearMeasures(t){this._entries=t?this._entries.filter(r=>r.name!==t):this._entries.filter(r=>r.entryType!=="measure")}clearResourceTimings(){this._entries=this._entries.filter(t=>t.entryType!=="resource"||t.entryType!=="navigation")}getEntries(){return this._entries}getEntriesByName(t,r){return this._entries.filter(n=>n.name===t&&(!r||n.entryType===r))}getEntriesByType(t){return this._entries.filter(r=>r.entryType===t)}mark(t,r){let n=new ie(t,r);return this._entries.push(n),n}measure(t,r,n){let o,s;typeof r=="string"?(o=this.getEntriesByName(r,"mark")[0]?.startTime,s=this.getEntriesByName(n,"mark")[0]?.startTime):(o=Number.parseFloat(r?.start)||this.now(),s=Number.parseFloat(r?.end)||this.now());let a=new k(t,{startTime:o,detail:{start:o,end:s}});return this._entries.push(a),a}setResourceTimingBufferSize(t){this._resourceTimingBufferSize=t}addEventListener(t,r,n){throw h("Performance.addEventListener")}removeEventListener(t,r,n){throw h("Performance.removeEventListener")}dispatchEvent(t){throw h("Performance.dispatchEvent")}toJSON(){return this}},q=class{static{i(this,"PerformanceObserver")}__unenv__=!0;static supportedEntryTypes=[];_callback=null;constructor(t){this._callback=t}takeRecords(){return[]}disconnect(){throw h("PerformanceObserver.disconnect")}observe(t){throw h("PerformanceObserver.observe")}bind(t){return t}runInAsyncScope(t,r,...n){return t.call(r,...n)}asyncId(){return 0}triggerAsyncId(){return 0}emitDestroy(){return this}},Oe=globalThis.performance&&"addEventListener"in globalThis.performance?globalThis.performance:new H;globalThis.performance=Oe;globalThis.Performance=H;globalThis.PerformanceEntry=A;globalThis.PerformanceMark=ie;globalThis.PerformanceMeasure=k;globalThis.PerformanceObserver=q;globalThis.PerformanceObserverEntryList=U;globalThis.PerformanceResourceTiming=j;import{Writable as Ne}from"node:stream";var _=Object.assign(()=>{},{__unenv__:!0});var p=globalThis.console,Se=!0,Pe=new Ne,Ie=new Ne,Y=p?.log??_,yt=p?.info??Y,bo=p?.trace??yt,Ao=p?.debug??Y,Oo=p?.table??Y,xt=p?.error??Y,No=p?.warn??xt,So=p?.createTask??T("console.createTask");var Po=p?.clear??_,Io=p?.count??_,Co=p?.countReset??_,Mo=p?.dir??_,Lo=p?.dirxml??_,Do=p?.group??_,ko=p?.groupEnd??_,jo=p?.groupCollapsed??_,Ho=p?.profile??_,Fo=p?.profileEnd??_,Wo=p?.time??_,$o=p?.timeEnd??_,Go=p?.timeLog??_,Bo=p?.timeStamp??_,Ce=p?.Console??Ae("console.Console"),Me=new Map;var Le=_,De=_;var ae=globalThis.console,{assert:Qo,clear:Xo,context:Zo,count:es,countReset:ts,createTask:rs,debug:ns,dir:os,dirxml:ss,error:is,group:as,groupCollapsed:cs,groupEnd:ls,info:ds,log:us,profile:fs,profileEnd:hs,table:ps,time:ms,timeEnd:gs,timeLog:Es,timeStamp:_s,trace:ys,warn:xs}=ae;Object.assign(ae,{Console:Ce,_ignoreErrors:Se,_stderr:Pe,_stderrErrorHandler:De,_stdout:Ie,_stdoutErrorHandler:Le,_times:Me});var ke=ae;globalThis.console=ke;var je=Object.assign(i(function(t){let r=Date.now(),n=Math.trunc(r/1e3),o=r%1e3*1e6;if(t){let s=n-t[0],a=o-t[0];return a<0&&(s=s-1,a=1e9+a),[s,a]}return[n,o]},"hrtime"),{bigint:i(function(){return BigInt(Date.now()*1e6)},"bigint")});import{EventEmitter as He}from"node:events";var F=class{static{i(this,"ReadStream")}fd;isRaw=!1;isTTY=!1;constructor(t){this.fd=t}setRawMode(t){return this.isRaw=t,this}};var C=class{static{i(this,"WriteStream")}fd;columns=80;rows=24;isTTY=!1;constructor(t){this.fd=t}clearLine(t,r){return r&&r(),!1}clearScreenDown(t){return t&&t(),!1}cursorTo(t,r,n){return n&&typeof n=="function"&&n(),!1}moveCursor(t,r,n){return n&&n(),!1}getColorDepth(t){return 1}hasColors(t,r){return!1}getWindowSize(){return[this.columns,this.rows]}write(t,r,n){t instanceof Uint8Array&&(t=new TextDecoder().decode(t));try{console.log(t)}catch{}return n&&typeof n=="function"&&n(),!1}};var ce="22.14.0";var V=class e extends He{static{i(this,"Process")}env;hrtime;nextTick;constructor(t){super(),this.env=t.env,this.hrtime=t.hrtime,this.nextTick=t.nextTick;for(let r of[...Object.getOwnPropertyNames(e.prototype),...Object.getOwnPropertyNames(He.prototype)]){let n=this[r];typeof n=="function"&&(this[r]=n.bind(this))}}emitWarning(t,r,n){console.warn(`${n?`[${n}] `:""}${r?`${r}: `:""}${t}`)}emit(...t){return super.emit(...t)}listeners(t){return super.listeners(t)}#t;#e;#r;get stdin(){return this.#t??=new F(0)}get stdout(){return this.#e??=new C(1)}get stderr(){return this.#r??=new C(2)}#s="/";chdir(t){this.#s=t}cwd(){return this.#s}arch="";platform="";argv=[];argv0="";execArgv=[];execPath="";title="";pid=200;ppid=100;get version(){return`v${ce}`}get versions(){return{node:ce}}get allowedNodeEnvironmentFlags(){return new Set}get sourceMapsEnabled(){return!1}get debugPort(){return 0}get throwDeprecation(){return!1}get traceDeprecation(){return!1}get features(){return{}}get release(){return{}}get connected(){return!1}get config(){return{}}get moduleLoadList(){return[]}constrainedMemory(){return 0}availableMemory(){return 0}uptime(){return 0}resourceUsage(){return{}}ref(){}unref(){}umask(){throw h("process.umask")}getBuiltinModule(){}getActiveResourcesInfo(){throw h("process.getActiveResourcesInfo")}exit(){throw h("process.exit")}reallyExit(){throw h("process.reallyExit")}kill(){throw h("process.kill")}abort(){throw h("process.abort")}dlopen(){throw h("process.dlopen")}setSourceMapsEnabled(){throw h("process.setSourceMapsEnabled")}loadEnvFile(){throw h("process.loadEnvFile")}disconnect(){throw h("process.disconnect")}cpuUsage(){throw h("process.cpuUsage")}setUncaughtExceptionCaptureCallback(){throw h("process.setUncaughtExceptionCaptureCallback")}hasUncaughtExceptionCaptureCallback(){throw h("process.hasUncaughtExceptionCaptureCallback")}initgroups(){throw h("process.initgroups")}openStdin(){throw h("process.openStdin")}assert(){throw h("process.assert")}binding(){throw h("process.binding")}permission={has:T("process.permission.has")};report={directory:"",filename:"",signal:"SIGUSR2",compact:!1,reportOnFatalError:!1,reportOnSignal:!1,reportOnUncaughtException:!1,getReport:T("process.report.getReport"),writeReport:T("process.report.writeReport")};finalization={register:T("process.finalization.register"),unregister:T("process.finalization.unregister"),registerBeforeExit:T("process.finalization.registerBeforeExit")};memoryUsage=Object.assign(()=>({arrayBuffers:0,rss:0,external:0,heapTotal:0,heapUsed:0}),{rss:i(()=>0,"rss")});mainModule=void 0;domain=void 0;send=void 0;exitCode=void 0;channel=void 0;getegid=void 0;geteuid=void 0;getgid=void 0;getgroups=void 0;getuid=void 0;setegid=void 0;seteuid=void 0;setgid=void 0;setgroups=void 0;setuid=void 0;_events=void 0;_eventsCount=void 0;_exiting=void 0;_maxListeners=void 0;_debugEnd=void 0;_debugProcess=void 0;_fatalException=void 0;_getActiveHandles=void 0;_getActiveRequests=void 0;_kill=void 0;_preload_modules=void 0;_rawDebug=void 0;_startProfilerIdleNotifier=void 0;_stopProfilerIdleNotifier=void 0;_tickCallback=void 0;_disconnect=void 0;_handleQueue=void 0;_pendingMessage=void 0;_channel=void 0;_send=void 0;_linkedBinding=void 0};var Fe=globalThis.process,We=Fe.getBuiltinModule,{exit:wt,platform:Rt,nextTick:$e}=We("node:process"),vt=new V({env:Fe.env,hrtime:je,nextTick:$e}),{abort:Tt,addListener:bt,allowedNodeEnvironmentFlags:At,hasUncaughtExceptionCaptureCallback:Ot,setUncaughtExceptionCaptureCallback:Nt,loadEnvFile:St,sourceMapsEnabled:Pt,arch:It,argv:Ct,argv0:Mt,chdir:Lt,config:Dt,connected:kt,constrainedMemory:jt,availableMemory:Ht,cpuUsage:Ft,cwd:Wt,debugPort:$t,dlopen:Gt,disconnect:Bt,emit:Ut,emitWarning:qt,env:Yt,eventNames:Vt,execArgv:zt,execPath:Jt,finalization:Kt,features:Qt,getActiveResourcesInfo:Xt,getMaxListeners:Zt,hrtime:er,kill:tr,listeners:rr,listenerCount:nr,memoryUsage:or,on:sr,off:ir,once:ar,pid:cr,ppid:lr,prependListener:dr,prependOnceListener:ur,rawListeners:fr,release:hr,removeAllListeners:pr,removeListener:mr,report:gr,resourceUsage:Er,setMaxListeners:_r,setSourceMapsEnabled:yr,stderr:xr,stdin:wr,stdout:Rr,title:vr,throwDeprecation:Tr,traceDeprecation:br,umask:Ar,uptime:Or,version:Nr,versions:Sr,domain:Pr,initgroups:Ir,moduleLoadList:Cr,reallyExit:Mr,openStdin:Lr,assert:Dr,binding:kr,send:jr,exitCode:Hr,channel:Fr,getegid:Wr,geteuid:$r,getgid:Gr,getgroups:Br,getuid:Ur,setegid:qr,seteuid:Yr,setgid:Vr,setgroups:zr,setuid:Jr,permission:Kr,mainModule:Qr,_events:Xr,_eventsCount:Zr,_exiting:en,_maxListeners:tn,_debugEnd:rn,_debugProcess:nn,_fatalException:on,_getActiveHandles:sn,_getActiveRequests:an,_kill:cn,_preload_modules:ln,_rawDebug:dn,_startProfilerIdleNotifier:un,_stopProfilerIdleNotifier:fn,_tickCallback:hn,_disconnect:pn,_handleQueue:mn,_pendingMessage:gn,_channel:En,_send:_n,_linkedBinding:yn}=vt,xn={abort:Tt,addListener:bt,allowedNodeEnvironmentFlags:At,hasUncaughtExceptionCaptureCallback:Ot,setUncaughtExceptionCaptureCallback:Nt,loadEnvFile:St,sourceMapsEnabled:Pt,arch:It,argv:Ct,argv0:Mt,chdir:Lt,config:Dt,connected:kt,constrainedMemory:jt,availableMemory:Ht,cpuUsage:Ft,cwd:Wt,debugPort:$t,dlopen:Gt,disconnect:Bt,emit:Ut,emitWarning:qt,env:Yt,eventNames:Vt,execArgv:zt,execPath:Jt,exit:wt,finalization:Kt,features:Qt,getBuiltinModule:We,getActiveResourcesInfo:Xt,getMaxListeners:Zt,hrtime:er,kill:tr,listeners:rr,listenerCount:nr,memoryUsage:or,nextTick:$e,on:sr,off:ir,once:ar,pid:cr,platform:Rt,ppid:lr,prependListener:dr,prependOnceListener:ur,rawListeners:fr,release:hr,removeAllListeners:pr,removeListener:mr,report:gr,resourceUsage:Er,setMaxListeners:_r,setSourceMapsEnabled:yr,stderr:xr,stdin:wr,stdout:Rr,title:vr,throwDeprecation:Tr,traceDeprecation:br,umask:Ar,uptime:Or,version:Nr,versions:Sr,domain:Pr,initgroups:Ir,moduleLoadList:Cr,reallyExit:Mr,openStdin:Lr,assert:Dr,binding:kr,send:jr,exitCode:Hr,channel:Fr,getegid:Wr,geteuid:$r,getgid:Gr,getgroups:Br,getuid:Ur,setegid:qr,seteuid:Yr,setgid:Vr,setgroups:zr,setuid:Jr,permission:Kr,mainModule:Qr,_events:Xr,_eventsCount:Zr,_exiting:en,_maxListeners:tn,_debugEnd:rn,_debugProcess:nn,_fatalException:on,_getActiveHandles:sn,_getActiveRequests:an,_kill:cn,_preload_modules:ln,_rawDebug:dn,_startProfilerIdleNotifier:un,_stopProfilerIdleNotifier:fn,_tickCallback:hn,_disconnect:pn,_handleQueue:mn,_pendingMessage:gn,_channel:En,_send:_n,_linkedBinding:yn},Ge=xn;globalThis.process=Ge;var le=i((e,t,r)=>(n,o)=>{let s=-1;return a(0);async function a(l){if(l<=s)throw new Error("next() called multiple times");s=l;let c,d=!1,u;if(e[l]?(u=e[l][0][0],n.req.routeIndex=l):u=l===e.length&&o||void 0,u)try{c=await u(n,()=>a(l+1))}catch(f){if(f instanceof Error&&t)n.error=f,c=await t(f,n),d=!0;else throw f}else n.finalized===!1&&r&&(c=await r(n));return c&&(n.finalized===!1||d)&&(n.res=c),n}},"compose");var Be=Symbol();var Ue=i(async(e,t=Object.create(null))=>{let{all:r=!1,dot:n=!1}=t,s=(e instanceof z?e.raw.headers:e.headers).get("Content-Type");return s?.startsWith("multipart/form-data")||s?.startsWith("application/x-www-form-urlencoded")?wn(e,{all:r,dot:n}):{}},"parseBody");async function wn(e,t){let r=await e.formData();return r?Rn(r,t):{}}i(wn,"parseFormData");function Rn(e,t){let r=Object.create(null);return e.forEach((n,o)=>{t.all||o.endsWith("[]")?vn(r,o,n):r[o]=n}),t.dot&&Object.entries(r).forEach(([n,o])=>{n.includes(".")&&(Tn(r,n,o),delete r[n])}),r}i(Rn,"convertFormDataToBodyData");var vn=i((e,t,r)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(r):e[t]=[e[t],r]:t.endsWith("[]")?e[t]=[r]:e[t]=r},"handleParsingAllValues"),Tn=i((e,t,r)=>{let n=e,o=t.split(".");o.forEach((s,a)=>{a===o.length-1?n[s]=r:((!n[s]||typeof n[s]!="object"||Array.isArray(n[s])||n[s]instanceof File)&&(n[s]=Object.create(null)),n=n[s])})},"handleParsingNestedValues");var ue=i(e=>{let t=e.split("/");return t[0]===""&&t.shift(),t},"splitPath"),qe=i(e=>{let{groups:t,path:r}=bn(e),n=ue(r);return An(n,t)},"splitRoutingPath"),bn=i(e=>{let t=[];return e=e.replace(/\{[^}]+\}/g,(r,n)=>{let o=`@${n}`;return t.push([o,r]),o}),{groups:t,path:e}},"extractGroupsFromPath"),An=i((e,t)=>{for(let r=t.length-1;r>=0;r--){let[n]=t[r];for(let o=e.length-1;o>=0;o--)if(e[o].includes(n)){e[o]=e[o].replace(n,t[r][1]);break}}return e},"replaceGroupMarks"),J={},Ye=i((e,t)=>{if(e==="*")return"*";let r=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(r){let n=`${e}#${t}`;return J[n]||(r[2]?J[n]=t&&t[0]!==":"&&t[0]!=="*"?[n,r[1],new RegExp(`^${r[2]}(?=/${t})`)]:[e,r[1],new RegExp(`^${r[2]}$`)]:J[n]=[e,r[1],!0]),J[n]}return null},"getPattern"),K=i((e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,r=>{try{return t(r)}catch{return r}})}},"tryDecode"),On=i(e=>K(e,decodeURI),"tryDecodeURI"),fe=i(e=>{let t=e.url,r=t.indexOf("/",t.indexOf(":")+4),n=r;for(;n<t.length;n++){let o=t.charCodeAt(n);if(o===37){let s=t.indexOf("?",n),a=t.slice(r,s===-1?void 0:s);return On(a.includes("%25")?a.replace(/%25/g,"%2525"):a)}else if(o===63)break}return t.slice(r,n)},"getPath");var Ve=i(e=>{let t=fe(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},"getPathNoStrict"),O=i((e,t,...r)=>(r.length&&(t=O(t,...r)),`${e?.[0]==="/"?"":"/"}${e}${t==="/"?"":`${e?.at(-1)==="/"?"":"/"}${t?.[0]==="/"?t.slice(1):t}`}`),"mergePath"),Q=i(e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;let t=e.split("/"),r=[],n="";return t.forEach(o=>{if(o!==""&&!/\:/.test(o))n+="/"+o;else if(/\:/.test(o))if(/\?/.test(o)){r.length===0&&n===""?r.push("/"):r.push(n);let s=o.replace("?","");n+="/"+s,r.push(n)}else n+="/"+o}),r.filter((o,s,a)=>a.indexOf(o)===s)},"checkOptionalParameter"),de=i(e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?K(e,he):e):e,"_decodeURI"),ze=i((e,t,r)=>{let n;if(!r&&t&&!/[%+]/.test(t)){let a=e.indexOf(`?${t}`,8);for(a===-1&&(a=e.indexOf(`&${t}`,8));a!==-1;){let l=e.charCodeAt(a+t.length+1);if(l===61){let c=a+t.length+2,d=e.indexOf("&",c);return de(e.slice(c,d===-1?void 0:d))}else if(l==38||isNaN(l))return"";a=e.indexOf(`&${t}`,a+1)}if(n=/[%+]/.test(e),!n)return}let o={};n??=/[%+]/.test(e);let s=e.indexOf("?",8);for(;s!==-1;){let a=e.indexOf("&",s+1),l=e.indexOf("=",s);l>a&&a!==-1&&(l=-1);let c=e.slice(s+1,l===-1?a===-1?void 0:a:l);if(n&&(c=de(c)),s=a,c==="")continue;let d;l===-1?d="":(d=e.slice(l+1,a===-1?void 0:a),n&&(d=de(d))),r?(o[c]&&Array.isArray(o[c])||(o[c]=[]),o[c].push(d)):o[c]??=d}return t?o[t]:o},"_getQueryParam"),Je=ze,Ke=i((e,t)=>ze(e,t,!0),"getQueryParams"),he=decodeURIComponent;var Qe=i(e=>K(e,he),"tryDecodeURIComponent"),z=class{static{i(this,"HonoRequest")}raw;#t;#e;routeIndex=0;path;bodyCache={};constructor(e,t="/",r=[[]]){this.raw=e,this.path=t,this.#e=r,this.#t={}}param(e){return e?this.#r(e):this.#s()}#r(e){let t=this.#e[0][this.routeIndex][1][e],r=this.#o(t);return r?/\%/.test(r)?Qe(r):r:void 0}#s(){let e={},t=Object.keys(this.#e[0][this.routeIndex][1]);for(let r of t){let n=this.#o(this.#e[0][this.routeIndex][1][r]);n&&typeof n=="string"&&(e[r]=/\%/.test(n)?Qe(n):n)}return e}#o(e){return this.#e[1]?this.#e[1][e]:e}query(e){return Je(this.url,e)}queries(e){return Ke(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;let t={};return this.raw.headers.forEach((r,n)=>{t[n]=r}),t}async parseBody(e){return this.bodyCache.parsedBody??=await Ue(this,e)}#n=i(e=>{let{bodyCache:t,raw:r}=this,n=t[e];if(n)return n;let o=Object.keys(t)[0];return o?t[o].then(s=>(o==="json"&&(s=JSON.stringify(s)),new Response(s)[e]())):t[e]=r[e]()},"#cachedBody");json(){return this.#n("text").then(e=>JSON.parse(e))}text(){return this.#n("text")}arrayBuffer(){return this.#n("arrayBuffer")}blob(){return this.#n("blob")}formData(){return this.#n("formData")}addValidatedData(e,t){this.#t[e]=t}valid(e){return this.#t[e]}get url(){return this.raw.url}get method(){return this.raw.method}get[Be](){return this.#e}get matchedRoutes(){return this.#e[0].map(([[,e]])=>e)}get routePath(){return this.#e[0].map(([[,e]])=>e)[this.routeIndex].path}};var Xe={Stringify:1,BeforeStream:2,Stream:3},Nn=i((e,t)=>{let r=new String(e);return r.isEscaped=!0,r.callbacks=t,r},"raw");var pe=i(async(e,t,r,n,o)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));let s=e.callbacks;if(!s?.length)return Promise.resolve(e);o?o[0]+=e:o=[e];let a=Promise.all(s.map(l=>l({phase:t,buffer:o,context:n}))).then(l=>Promise.all(l.filter(Boolean).map(c=>pe(c,t,!1,n,o))).then(()=>o[0]));return r?Nn(await a,s):a},"resolveCallback");var Sn="text/plain; charset=UTF-8",me=i((e,t)=>({"Content-Type":e,...t}),"setDefaultContentType"),Ze=class{static{i(this,"Context")}#t;#e;env={};#r;finalized=!1;error;#s;#o;#n;#d;#c;#l;#a;#u;#f;constructor(e,t){this.#t=e,t&&(this.#o=t.executionCtx,this.env=t.env,this.#l=t.notFoundHandler,this.#f=t.path,this.#u=t.matchResult)}get req(){return this.#e??=new z(this.#t,this.#f,this.#u),this.#e}get event(){if(this.#o&&"respondWith"in this.#o)return this.#o;throw Error("This context has no FetchEvent")}get executionCtx(){if(this.#o)return this.#o;throw Error("This context has no ExecutionContext")}get res(){return this.#n||=new Response(null,{headers:this.#a??=new Headers})}set res(e){if(this.#n&&e){e=new Response(e.body,e);for(let[t,r]of this.#n.headers.entries())if(t!=="content-type")if(t==="set-cookie"){let n=this.#n.headers.getSetCookie();e.headers.delete("set-cookie");for(let o of n)e.headers.append("set-cookie",o)}else e.headers.set(t,r)}this.#n=e,this.finalized=!0}render=i((...e)=>(this.#c??=t=>this.html(t),this.#c(...e)),"render");setLayout=i(e=>this.#d=e,"setLayout");getLayout=i(()=>this.#d,"getLayout");setRenderer=i(e=>{this.#c=e},"setRenderer");header=i((e,t,r)=>{this.finalized&&(this.#n=new Response(this.#n.body,this.#n));let n=this.#n?this.#n.headers:this.#a??=new Headers;t===void 0?n.delete(e):r?.append?n.append(e,t):n.set(e,t)},"header");status=i(e=>{this.#s=e},"status");set=i((e,t)=>{this.#r??=new Map,this.#r.set(e,t)},"set");get=i(e=>this.#r?this.#r.get(e):void 0,"get");get var(){return this.#r?Object.fromEntries(this.#r):{}}#i(e,t,r){let n=this.#n?new Headers(this.#n.headers):this.#a??new Headers;if(typeof t=="object"&&"headers"in t){let s=t.headers instanceof Headers?t.headers:new Headers(t.headers);for(let[a,l]of s)a.toLowerCase()==="set-cookie"?n.append(a,l):n.set(a,l)}if(r)for(let[s,a]of Object.entries(r))if(typeof a=="string")n.set(s,a);else{n.delete(s);for(let l of a)n.append(s,l)}let o=typeof t=="number"?t:t?.status??this.#s;return new Response(e,{status:o,headers:n})}newResponse=i((...e)=>this.#i(...e),"newResponse");body=i((e,t,r)=>this.#i(e,t,r),"body");text=i((e,t,r)=>!this.#a&&!this.#s&&!t&&!r&&!this.finalized?new Response(e):this.#i(e,t,me(Sn,r)),"text");json=i((e,t,r)=>this.#i(JSON.stringify(e),t,me("application/json",r)),"json");html=i((e,t,r)=>{let n=i(o=>this.#i(o,t,me("text/html; charset=UTF-8",r)),"res");return typeof e=="object"?pe(e,Xe.Stringify,!1,{}).then(n):n(e)},"html");redirect=i((e,t)=>{let r=String(e);return this.header("Location",/[^\x00-\xFF]/.test(r)?encodeURI(r):r),this.newResponse(null,t??302)},"redirect");notFound=i(()=>(this.#l??=()=>new Response,this.#l(this)),"notFound")};var m="ALL",et="all",tt=["get","post","put","delete","options","patch"],X="Can not add a route since the matcher is already built.",Z=class extends Error{static{i(this,"UnsupportedPathError")}};var rt="__COMPOSED_HANDLER";var Pn=i(e=>e.text("404 Not Found",404),"notFoundHandler"),nt=i((e,t)=>{if("getResponse"in e){let r=e.getResponse();return t.newResponse(r.body,r)}return console.error(e),t.text("Internal Server Error",500)},"errorHandler"),ge=class{static{i(this,"Hono")}get;post;put;delete;options;patch;all;on;use;router;getPath;_basePath="/";#t="/";routes=[];constructor(e={}){[...tt,et].forEach(o=>{this[o]=(s,...a)=>(typeof s=="string"?this.#t=s:this.#s(o,this.#t,s),a.forEach(l=>{this.#s(o,this.#t,l)}),this)}),this.on=(o,s,...a)=>{for(let l of[s].flat()){this.#t=l;for(let c of[o].flat())a.map(d=>{this.#s(c.toUpperCase(),this.#t,d)})}return this},this.use=(o,...s)=>(typeof o=="string"?this.#t=o:(this.#t="*",s.unshift(o)),s.forEach(a=>{this.#s(m,this.#t,a)}),this);let{strict:r,...n}=e;Object.assign(this,n),this.getPath=r??!0?e.getPath??fe:Ve}#e(){let e=new ge({router:this.router,getPath:this.getPath});return e.errorHandler=this.errorHandler,e.#r=this.#r,e.routes=this.routes,e}#r=Pn;errorHandler=nt;route(e,t){let r=this.basePath(e);return t.routes.map(n=>{let o;t.errorHandler===nt?o=n.handler:(o=i(async(s,a)=>(await le([],t.errorHandler)(s,()=>n.handler(s,a))).res,"handler"),o[rt]=n.handler),r.#s(n.method,n.path,o)}),this}basePath(e){let t=this.#e();return t._basePath=O(this._basePath,e),t}onError=i(e=>(this.errorHandler=e,this),"onError");notFound=i(e=>(this.#r=e,this),"notFound");mount(e,t,r){let n,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?n=i(l=>l,"replaceRequest"):n=r.replaceRequest));let s=o?l=>{let c=o(l);return Array.isArray(c)?c:[c]}:l=>{let c;try{c=l.executionCtx}catch{}return[l.env,c]};n||=(()=>{let l=O(this._basePath,e),c=l==="/"?0:l.length;return d=>{let u=new URL(d.url);return u.pathname=u.pathname.slice(c)||"/",new Request(u,d)}})();let a=i(async(l,c)=>{let d=await t(n(l.req.raw),...s(l));if(d)return d;await c()},"handler");return this.#s(m,O(e,"*"),a),this}#s(e,t,r){e=e.toUpperCase(),t=O(this._basePath,t);let n={basePath:this._basePath,path:t,method:e,handler:r};this.router.add(e,t,[r,n]),this.routes.push(n)}#o(e,t){if(e instanceof Error)return this.errorHandler(e,t);throw e}#n(e,t,r,n){if(n==="HEAD")return(async()=>new Response(null,await this.#n(e,t,r,"GET")))();let o=this.getPath(e,{env:r}),s=this.router.match(n,o),a=new Ze(e,{path:o,matchResult:s,env:r,executionCtx:t,notFoundHandler:this.#r});if(s[0].length===1){let c;try{c=s[0][0][0][0](a,async()=>{a.res=await this.#r(a)})}catch(d){return this.#o(d,a)}return c instanceof Promise?c.then(d=>d||(a.finalized?a.res:this.#r(a))).catch(d=>this.#o(d,a)):c??this.#r(a)}let l=le(s[0],this.errorHandler,this.#r);return(async()=>{try{let c=await l(a);if(!c.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return c.res}catch(c){return this.#o(c,a)}})()}fetch=i((e,...t)=>this.#n(e,t[1],t[0],e.method),"fetch");request=i((e,t,r,n)=>e instanceof Request?this.fetch(t?new Request(e,t):e,r,n):(e=e.toString(),this.fetch(new Request(/^https?:\/\//.test(e)?e:`http://localhost${O("/",e)}`,t),r,n)),"request");fire=i(()=>{addEventListener("fetch",e=>{e.respondWith(this.#n(e.request,e,void 0,e.request.method))})},"fire")};var ee="[^/]+",W=".*",$="(?:|/.*)",N=Symbol(),In=new Set(".\\+*[^]$()");function Cn(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===W||e===$?1:t===W||t===$?-1:e===ee?1:t===ee?-1:e.length===t.length?e<t?-1:1:t.length-e.length}i(Cn,"compareKey");var te=class{static{i(this,"Node")}#t;#e;#r=Object.create(null);insert(e,t,r,n,o){if(e.length===0){if(this.#t!==void 0)throw N;if(o)return;this.#t=t;return}let[s,...a]=e,l=s==="*"?a.length===0?["","",W]:["","",ee]:s==="/*"?["","",$]:s.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/),c;if(l){let d=l[1],u=l[2]||ee;if(d&&l[2]&&(u===".*"||(u=u.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(u))))throw N;if(c=this.#r[u],!c){if(Object.keys(this.#r).some(f=>f!==W&&f!==$))throw N;if(o)return;c=this.#r[u]=new te,d!==""&&(c.#e=n.varIndex++)}!o&&d!==""&&r.push([d,c.#e])}else if(c=this.#r[s],!c){if(Object.keys(this.#r).some(d=>d.length>1&&d!==W&&d!==$))throw N;if(o)return;c=this.#r[s]=new te}c.insert(a,t,r,n,o)}buildRegExpStr(){let t=Object.keys(this.#r).sort(Cn).map(r=>{let n=this.#r[r];return(typeof n.#e=="number"?`(${r})@${n.#e}`:In.has(r)?`\\${r}`:r)+n.buildRegExpStr()});return typeof this.#t=="number"&&t.unshift(`#${this.#t}`),t.length===0?"":t.length===1?t[0]:"(?:"+t.join("|")+")"}};var ot=class{static{i(this,"Trie")}#t={varIndex:0};#e=new te;insert(e,t,r){let n=[],o=[];for(let a=0;;){let l=!1;if(e=e.replace(/\{[^}]+\}/g,c=>{let d=`@\\${a}`;return o[a]=[d,c],a++,l=!0,d}),!l)break}let s=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let a=o.length-1;a>=0;a--){let[l]=o[a];for(let c=s.length-1;c>=0;c--)if(s[c].indexOf(l)!==-1){s[c]=s[c].replace(l,o[a][1]);break}}return this.#e.insert(s,t,n,this.#t,r),n}buildRegExp(){let e=this.#e.buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0,r=[],n=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(o,s,a)=>s!==void 0?(r[++t]=Number(s),"$()"):(a!==void 0&&(n[Number(a)]=++t),"")),[new RegExp(`^${e}`),r,n]}};var st=[],Mn=[/^$/,[],Object.create(null)],it=Object.create(null);function at(e){return it[e]??=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,r)=>r?`\\${r}`:"(?:|/.*)")}$`)}i(at,"buildWildcardRegExp");function Ln(){it=Object.create(null)}i(Ln,"clearWildcardRegExpCache");function Dn(e){let t=new ot,r=[];if(e.length===0)return Mn;let n=e.map(d=>[!/\*|\/:/.test(d[0]),...d]).sort(([d,u],[f,E])=>d?1:f?-1:u.length-E.length),o=Object.create(null);for(let d=0,u=-1,f=n.length;d<f;d++){let[E,x,g]=n[d];E?o[x]=[g.map(([w])=>[w,Object.create(null)]),st]:u++;let y;try{y=t.insert(x,u,E)}catch(w){throw w===N?new Z(x):w}E||(r[u]=g.map(([w,I])=>{let L=Object.create(null);for(I-=1;I>=0;I--){let[R,ne]=y[I];L[R]=ne}return[w,L]}))}let[s,a,l]=t.buildRegExp();for(let d=0,u=r.length;d<u;d++)for(let f=0,E=r[d].length;f<E;f++){let x=r[d][f]?.[1];if(!x)continue;let g=Object.keys(x);for(let y=0,w=g.length;y<w;y++)x[g[y]]=l[x[g[y]]]}let c=[];for(let d in a)c[d]=r[a[d]];return[s,c,o]}i(Dn,"buildMatcherFromPreprocessedRoutes");function M(e,t){if(e){for(let r of Object.keys(e).sort((n,o)=>o.length-n.length))if(at(r).test(t))return[...e[r]]}}i(M,"findMiddleware");var Ee=class{static{i(this,"RegExpRouter")}name="RegExpRouter";#t;#e;constructor(){this.#t={[m]:Object.create(null)},this.#e={[m]:Object.create(null)}}add(e,t,r){let n=this.#t,o=this.#e;if(!n||!o)throw new Error(X);n[e]||[n,o].forEach(l=>{l[e]=Object.create(null),Object.keys(l[m]).forEach(c=>{l[e][c]=[...l[m][c]]})}),t==="/*"&&(t="*");let s=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){let l=at(t);e===m?Object.keys(n).forEach(c=>{n[c][t]||=M(n[c],t)||M(n[m],t)||[]}):n[e][t]||=M(n[e],t)||M(n[m],t)||[],Object.keys(n).forEach(c=>{(e===m||e===c)&&Object.keys(n[c]).forEach(d=>{l.test(d)&&n[c][d].push([r,s])})}),Object.keys(o).forEach(c=>{(e===m||e===c)&&Object.keys(o[c]).forEach(d=>l.test(d)&&o[c][d].push([r,s]))});return}let a=Q(t)||[t];for(let l=0,c=a.length;l<c;l++){let d=a[l];Object.keys(o).forEach(u=>{(e===m||e===u)&&(o[u][d]||=[...M(n[u],d)||M(n[m],d)||[]],o[u][d].push([r,s-c+l+1]))})}}match(e,t){Ln();let r=this.#r();return this.match=(n,o)=>{let s=r[n]||r[m],a=s[2][o];if(a)return a;let l=o.match(s[0]);if(!l)return[[],st];let c=l.indexOf("",1);return[s[1][c],l]},this.match(e,t)}#r(){let e=Object.create(null);return Object.keys(this.#e).concat(Object.keys(this.#t)).forEach(t=>{e[t]||=this.#s(t)}),this.#t=this.#e=void 0,e}#s(e){let t=[],r=e===m;return[this.#t,this.#e].forEach(n=>{let o=n[e]?Object.keys(n[e]).map(s=>[s,n[e][s]]):[];o.length!==0?(r||=!0,t.push(...o)):e!==m&&t.push(...Object.keys(n[m]).map(s=>[s,n[m][s]]))}),r?Dn(t):null}};var _e=class{static{i(this,"SmartRouter")}name="SmartRouter";#t=[];#e=[];constructor(e){this.#t=e.routers}add(e,t,r){if(!this.#e)throw new Error(X);this.#e.push([e,t,r])}match(e,t){if(!this.#e)throw new Error("Fatal error");let r=this.#t,n=this.#e,o=r.length,s=0,a;for(;s<o;s++){let l=r[s];try{for(let c=0,d=n.length;c<d;c++)l.add(...n[c]);a=l.match(e,t)}catch(c){if(c instanceof Z)continue;throw c}this.match=l.match.bind(l),this.#t=[l],this.#e=void 0;break}if(s===o)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,a}get activeRouter(){if(this.#e||this.#t.length!==1)throw new Error("No active router has been determined yet.");return this.#t[0]}};var G=Object.create(null),ye=class{static{i(this,"Node")}#t;#e;#r;#s=0;#o=G;constructor(e,t,r){if(this.#e=r||Object.create(null),this.#t=[],e&&t){let n=Object.create(null);n[e]={handler:t,possibleKeys:[],score:0},this.#t=[n]}this.#r=[]}insert(e,t,r){this.#s=++this.#s;let n=this,o=qe(t),s=[];for(let a=0,l=o.length;a<l;a++){let c=o[a],d=o[a+1],u=Ye(c,d),f=Array.isArray(u)?u[0]:c;if(f in n.#e){n=n.#e[f],u&&s.push(u[1]);continue}n.#e[f]=new ye,u&&(n.#r.push(u),s.push(u[1])),n=n.#e[f]}return n.#t.push({[e]:{handler:r,possibleKeys:s.filter((a,l,c)=>c.indexOf(a)===l),score:this.#s}}),n}#n(e,t,r,n){let o=[];for(let s=0,a=e.#t.length;s<a;s++){let l=e.#t[s],c=l[t]||l[m],d={};if(c!==void 0&&(c.params=Object.create(null),o.push(c),r!==G||n&&n!==G))for(let u=0,f=c.possibleKeys.length;u<f;u++){let E=c.possibleKeys[u],x=d[c.score];c.params[E]=n?.[E]&&!x?n[E]:r[E]??n?.[E],d[c.score]=!0}}return o}search(e,t){let r=[];this.#o=G;let o=[this],s=ue(t),a=[];for(let l=0,c=s.length;l<c;l++){let d=s[l],u=l===c-1,f=[];for(let E=0,x=o.length;E<x;E++){let g=o[E],y=g.#e[d];y&&(y.#o=g.#o,u?(y.#e["*"]&&r.push(...this.#n(y.#e["*"],e,g.#o)),r.push(...this.#n(y,e,g.#o))):f.push(y));for(let w=0,I=g.#r.length;w<I;w++){let L=g.#r[w],R=g.#o===G?{}:{...g.#o};if(L==="*"){let b=g.#e["*"];b&&(r.push(...this.#n(b,e,g.#o)),b.#o=R,f.push(b));continue}let[ne,be,D]=L;if(!d&&!(D instanceof RegExp))continue;let v=g.#e[ne],mt=s.slice(l).join("/");if(D instanceof RegExp){let b=D.exec(mt);if(b){if(R[be]=b[0],r.push(...this.#n(v,e,g.#o,R)),Object.keys(v.#e).length){v.#o=R;let gt=b[0].match(/\//)?.length??0;(a[gt]||=[]).push(v)}continue}}(D===!0||D.test(d))&&(R[be]=d,u?(r.push(...this.#n(v,e,R,g.#o)),v.#e["*"]&&r.push(...this.#n(v.#e["*"],e,R,g.#o))):(v.#o=R,f.push(v)))}}o=f.concat(a.shift()??[])}return r.length>1&&r.sort((l,c)=>l.score-c.score),[r.map(({handler:l,params:c})=>[l,c])]}};var xe=class{static{i(this,"TrieRouter")}name="TrieRouter";#t;constructor(){this.#t=new ye}add(e,t,r){let n=Q(t);if(n){for(let o=0,s=n.length;o<s;o++)this.#t.insert(e,n[o],r);return}this.#t.insert(e,t,r)}match(e,t){return this.#t.search(e,t)}};var we=class extends ge{static{i(this,"Hono")}constructor(e={}){super(e),this.router=e.router??new _e({routers:[new Ee,new xe]})}};var ct=i(e=>{let r={...{origin:"*",allowMethods:["GET","HEAD","PUT","POST","DELETE","PATCH"],allowHeaders:[],exposeHeaders:[]},...e},n=(s=>typeof s=="string"?s==="*"?()=>s:a=>s===a?a:null:typeof s=="function"?s:a=>s.includes(a)?a:null)(r.origin),o=(s=>typeof s=="function"?s:Array.isArray(s)?()=>s:()=>[])(r.allowMethods);return i(async function(a,l){function c(u,f){a.res.headers.set(u,f)}i(c,"set");let d=await n(a.req.header("origin")||"",a);if(d&&c("Access-Control-Allow-Origin",d),r.origin!=="*"){let u=a.req.header("Vary");u?c("Vary",u):c("Vary","Origin")}if(r.credentials&&c("Access-Control-Allow-Credentials","true"),r.exposeHeaders?.length&&c("Access-Control-Expose-Headers",r.exposeHeaders.join(",")),a.req.method==="OPTIONS"){r.maxAge!=null&&c("Access-Control-Max-Age",r.maxAge.toString());let u=await o(a.req.header("origin")||"",a);u.length&&c("Access-Control-Allow-Methods",u.join(","));let f=r.allowHeaders;if(!f?.length){let E=a.req.header("Access-Control-Request-Headers");E&&(f=E.split(/\s*,\s*/))}return f?.length&&(c("Access-Control-Allow-Headers",f.join(",")),a.res.headers.append("Vary","Access-Control-Request-Headers")),a.res.headers.delete("Content-Length"),a.res.headers.delete("Content-Type"),new Response(null,{headers:a.res.headers,status:204,statusText:"No Content"})}await l()},"cors2")},"cors");var S=new we;S.use("*",ct({origin:["http://localhost:5173","http://localhost:3000"],allowMethods:["GET","POST","PUT","DELETE","OPTIONS"],allowHeaders:["Content-Type","Authorization"]}));S.post("/api/waitlist",async e=>{try{let{email:t,walletAddress:r,signature:n,network:o}=await e.req.json();if(!t||!r||!n)return e.json({error:"Email, wallet address, and signature are required"},400);if(!/^0x[a-fA-F0-9]{130}$/.test(n))return e.json({error:"Invalid signature format"},400);if(!/^0x[a-fA-F0-9]{40}$/.test(r))return e.json({error:"Invalid wallet address format"},400);let s=await e.env.WAITING_LIST.get(t),a=await e.env.WAITING_LIST.get(`wallet:${r}`);if(s)return e.json({error:"Email already registered"},409);if(a)return e.json({error:"Wallet address already registered"},409);let l=crypto.randomUUID(),c={email:t,walletAddress:r,signature:n,network:o||"unknown",joinedAt:new Date().toISOString(),position:await kn(e.env.WAITING_LIST),verified:!1,verificationToken:l};return await e.env.WAITING_LIST.put(t,JSON.stringify(c)),await e.env.WAITING_LIST.put(`wallet:${r}`,JSON.stringify(c)),await e.env.WAITING_LIST.put(`position:${c.position}`,t),await e.env.WAITING_LIST.put(`verify:${l}`,t),await jn(e.env,t,l),e.json({message:"Successfully joined waiting list. Please check your email to verify your account.",position:c.position,email:c.email,walletAddress:c.walletAddress,verified:!1,needsVerification:!0})}catch(t){return console.error("Waitlist registration error:",t),e.json({error:"Internal server error"},500)}});S.get("/api/verify",async e=>{try{let t=e.req.query("token");if(!t)return e.html(`
        <html>
          <body style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
            <h2>\u274C Invalid Verification Link</h2>
            <p>The verification token is missing or invalid.</p>
          </body>
        </html>
      `,400);let r=await e.env.WAITING_LIST.get(`verify:${t}`);if(!r)return e.html(`
        <html>
          <body style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
            <h2>\u274C Invalid or Expired Token</h2>
            <p>This verification link is invalid or has already been used.</p>
          </body>
        </html>
      `,400);let n=await e.env.WAITING_LIST.get(r);if(!n)return e.html(`
        <html>
          <body style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
            <h2>\u274C User Not Found</h2>
            <p>User data not found.</p>
          </body>
        </html>
      `,404);let o=JSON.parse(n);return o.verified=!0,o.verifiedAt=new Date().toISOString(),await e.env.WAITING_LIST.put(r,JSON.stringify(o)),await e.env.WAITING_LIST.put(`wallet:${o.walletAddress}`,JSON.stringify(o)),await e.env.WAITING_LIST.delete(`verify:${t}`),await Hn(e.env,r,o.position),e.html(`
      <html>
        <body style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
          <h2>\u2705 Email Verified Successfully!</h2>
          <p>Welcome to the waiting list! Your email has been verified.</p>
          <p>\u{1F3AF} Your position: <strong>#${o.position}</strong></p>
          <p>\u{1F4E7} A welcome email has been sent to your inbox.</p>
          <div style="margin-top: 30px;">
            <a href="https://waiting-list.jhfnetboy.workers.dev" style="background: #28a745; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px;">
              \u{1F332} Return to Waiting List
            </a>
          </div>
        </body>
      </html>
    `)}catch(t){return console.error("Verification error:",t),e.html(`
      <html>
        <body style="font-family: Arial, sans-serif; text-align: center; padding: 50px;">
          <h2>\u274C Verification Failed</h2>
          <p>An error occurred during verification. Please try again.</p>
        </body>
      </html>
    `,500)}});S.get("/api/waitlist/:email",async e=>{try{let t=e.req.param("email"),r=await e.env.WAITING_LIST.get(t);if(!r)return e.json({error:"Email not found"},404);let n=JSON.parse(r);return e.json({email:n.email,position:n.position,joinedAt:n.joinedAt,verified:n.verified||!1,verifiedAt:n.verifiedAt||null,walletAddress:n.walletAddress,network:n.network,message:`You are #${n.position} in the waiting list${n.verified?" (Verified \u2705)":" (Unverified \u26A0\uFE0F)"}`})}catch{return e.json({error:"Internal server error"},500)}});S.get("/api/waitlist",async e=>{try{let r=(await e.env.WAITING_LIST.list({prefix:"position:"})).keys.length;return e.json({total:r})}catch{return e.json({error:"Internal server error"},500)}});async function kn(e){return(await e.list({prefix:"position:"})).keys.length+1}i(kn,"getNextPosition");async function jn(e,t,r){if(!e.RESEND_API_KEY)return console.log("Resend API key not configured, skipping verification email"),!1;try{let n=`https://waiting-list.jhfnetboy.workers.dev/api/verify?token=${r}`,o=await fetch("https://api.resend.com/emails",{method:"POST",headers:{Authorization:`Bearer ${e.RESEND_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({from:e.FROM_EMAIL||"Waiting List <noreply@yourdomain.com>",to:[t],subject:"Verify Your Email - Waiting List",html:`
          <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
            <h2 style="color: #333;">\u{1F332} Verify Your Email</h2>
            <p>Hi there,</p>
            <p>Thank you for joining our waiting list with your Web3 wallet! To complete your registration, please verify your email address.</p>
            
            <div style="margin: 30px 0; text-align: center;">
              <a href="${n}" style="background: #007bff; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                \u2705 Verify Email Address
              </a>
            </div>
            
            <p>Or copy and paste this link into your browser:</p>
            <p style="background: #f5f5f5; padding: 10px; border-radius: 3px; word-break: break-all;">
              ${n}
            </p>
            
            <p style="color: #666; font-size: 14px;">
              If you didn't sign up for our waiting list, you can safely ignore this email.
            </p>
            
            <p>Best regards,<br>The Waiting List Team \u{1F680}</p>
          </div>
        `})});return o.ok?(console.log("Verification email sent successfully to:",t),!0):(console.error("Failed to send verification email:",await o.text()),!1)}catch(n){return console.error("Error sending verification email:",n),!1}}i(jn,"sendVerificationEmail");async function Hn(e,t,r){if(!e.RESEND_API_KEY)return console.log("Resend API key not configured, skipping email"),!0;try{let n="Welcome to our Waiting List! \u{1F389}",o=`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <style>
          body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
          .container { max-width: 600px; margin: 0 auto; padding: 20px; }
          .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
          .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 10px 10px; }
          .position { font-size: 24px; font-weight: bold; color: #667eea; text-align: center; margin: 20px 0; }
          .footer { text-align: center; margin-top: 30px; color: #666; font-size: 14px; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>\u{1F389} You're on the list!</h1>
          </div>
          <div class="content">
            <p>Hi there,</p>
            <p>Thank you for joining our waiting list! We're excited to have you on board.</p>
            
            <div class="position">
              You are #${r} in line
            </div>
            
            <p>We'll notify you as soon as we launch. In the meantime, feel free to follow our progress and updates.</p>
            
            <p>Best regards,<br>
            The Team</p>
          </div>
          <div class="footer">
            <p>This email was sent because you joined our waiting list.<br>
            If you have any questions, please contact us.</p>
          </div>
        </div>
      </body>
      </html>
    `,s=await fetch("https://api.resend.com/emails",{method:"POST",headers:{Authorization:`Bearer ${e.RESEND_API_KEY}`,"Content-Type":"application/json"},body:JSON.stringify({from:e.FROM_EMAIL||"Waiting List <noreply@yourdomain.com>",to:[t],subject:n,html:o})});if(s.ok)return console.log("Welcome email sent successfully to:",t),!0;{let a=await s.text();return console.error("Failed to send email:",a),!1}}catch(n){return console.error("Failed to send email:",n),!1}}i(Hn,"sendWelcomeEmail");S.get("*",async()=>new Response("Not Found",{status:404}));var lt=S;var Fn=i(async(e,t,r,n)=>{try{return await n.next(e,t)}finally{try{if(e.body!==null&&!e.bodyUsed){let o=e.body.getReader();for(;!(await o.read()).done;);}}catch(o){console.error("Failed to drain the unused request body.",o)}}},"drainBody"),dt=Fn;function ut(e){return{name:e?.name,message:e?.message??String(e),stack:e?.stack,cause:e?.cause===void 0?void 0:ut(e.cause)}}i(ut,"reduceError");var $n=i(async(e,t,r,n)=>{try{return await n.next(e,t)}catch(o){let s=ut(o);return Response.json(s,{status:500,headers:{"MF-Experimental-Error-Stack":"true"}})}},"jsonError"),ft=$n;var P=[dt,ft],B=lt;var ht=[];function Re(...e){ht.push(...e.flat())}i(Re,"__facade_register__");function pt(e,t,r,n,o){let[s,...a]=o;return s(e,t,r,{dispatch:n,next(c,d){return pt(c,d,r,n,a)}})}i(pt,"__facade_invokeChain__");function ve(e,t,r,n,o){return pt(e,t,r,n,[...ht,o])}i(ve,"__facade_invoke__");var re=class e{constructor(t,r,n){this.scheduledTime=t;this.cron=r;this.#t=n}static{i(this,"__Facade_ScheduledController__")}#t;noRetry(){if(!(this instanceof e))throw new TypeError("Illegal invocation");this.#t()}};function Bn(e){if(P===void 0||P.length===0)return e;for(let r of P)Re(r);let t=i(function(r,n,o){if(e.fetch===void 0)throw new Error("Handler does not export a fetch() function.");return e.fetch(r,n,o)},"fetchDispatcher");return{...e,fetch(r,n,o){return ve(r,n,o,i(function(a,l){if(a==="scheduled"&&e.scheduled!==void 0){let c=new re(Date.now(),l.cron??"",()=>{});return e.scheduled(c,n,o)}},"dispatcher"),t)}}}i(Bn,"wrapExportedHandler");function Un(e){if(P===void 0||P.length===0)return e;for(let t of P)Re(t);return class extends e{#t=i((t,r,n)=>{if(this.env=r,this.ctx=n,super.fetch===void 0)throw new Error("Entrypoint class does not define a fetch() function.");return super.fetch(t)},"#fetchDispatcher");#e=i((t,r)=>{if(t==="scheduled"&&super.scheduled!==void 0){let n=new re(Date.now(),r.cron??"",()=>{});return super.scheduled(n)}},"#dispatcher");fetch(t){return ve(t,this.env,this.ctx,this.#e,this.#t)}}}i(Un,"wrapWorkerEntrypoint");var Te;typeof B=="object"?Te=Bn(B):typeof B=="function"&&(Te=Un(B));var ud=Te;export{P as __INTERNAL_WRANGLER_MIDDLEWARE__,ud as default};
//# sourceMappingURL=worker.js.map
